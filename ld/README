------------------------------------------------------------------------------
README
------------------------------------------------------------------------------

LIBOPENCM3 LINKER SCRIPT GENERATOR
----------------------------------

This folder contains files needed for the automatic linker script generation
mechanism developed for libopencm3 library.

File contents
-------------

* {ROOT}/ld/devices.data	- Device database file
* {ROOT}/ld/linker.ld.S		- Linker script template
* {ROOT}/scripts/genlink.awk	- Device database file search script 

Principle of operation
----------------------

The user specifies in the project Makefile the device part name the project is
using, in the variable DEVICE. Note that full device part name must be
specified, because the device specific features is usually dependent on the
last characters of device name string. Note that the device name string search
is case insensitive.

DEVICE=stm32f407vgt6

Then, the user includes the file /mk/genlink-config.mk somewhere in the variables
definitions stage, and /mk/genlink-rules.mk somewhere inside the rule definitions
stage, as is explained in the /mk/README.

The script automatically modifies the $(LDSCRIPT) variable to meet the new
generated script with <device part name>.ld in the project directory, and adds
a rule to make it from the scratch.

Making the script is done by looking to device database file for the needed
definitions, and applying those definitions to the C preprocessor source
linker.ld.S outputting the preprocessed ld file.

The search in the device database is pattern-based, and using awk script
genlink.awk. The awk script traverses the file as a tree.
parameter for you.

Example of use
--------------

* will be added to the libopencm3-examples repository

Copyright
---------

This file is part of the libopencm3 project.

Copyright (C) 2013 Frantisek Burian <Bufran@seznam.cz>
Copyright (C) 2013 Werner Almesberger <wpwrak>

This library is free software: you can redistribute it and/or modify
it under the terms of the GNU Lesser General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This library is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public License
along with this library. If not, see <http://www.gnu.org/licenses/>.
